# –û—Å–Ω–æ–≤–Ω–∞ —ñ–¥–µ—è –∫–æ–¥—É - –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –ø—Ä–∏–Ω—Ü–∏–ø—É —ñ–Ω–∫–∞–ø—Å—É–ª—è—Ü—ñ—ó –≤ –û–û–ü.
# –¶–µ–π –∫–æ–¥ –æ–±–º–µ–∂—É—î –¥–æ—Å—Ç—É–ø –¥–æ "–ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö" –º–µ—Ç–æ–¥—ñ–≤ –∫–ª–∞—Å—É,
# —è–∫—â–æ –≤–æ–Ω–∏ –Ω–µ –¥–æ–¥–∞–Ω—ñ –¥–æ –º–Ω–æ–∂–∏–Ω–∏ –¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤.
# –¶–µ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –º–µ—Ç–æ–¥—É __getattribute__.

# –Ü–º–ø–æ—Ä—Ç —Ç–∏–ø—É Any –¥–ª—è –∞–Ω–æ—Ç–∞—Ü—ñ—ó —Ç–∏–ø—ñ–≤
from typing import Any

# –ß–æ—Ä–Ω–∏–π —Å–ø–∏—Å–æ–∫ –º–µ—Ç–æ–¥—ñ–≤, –¥–æ—Å—Ç—É–ø –¥–æ —è–∫–∏—Ö –∑–æ–≤–Ω—ñ –∫–ª–∞—Å—É –º–∞—î –±—É—Ç–∏ –æ–±–º–µ–∂–µ–Ω–∏–π
methods_blacklist = [
    "_connect_to_the_atm",
    "_count_the_cash",
    "_get_money",
]

# –ú–Ω–æ–∂–∏–Ω–∞ –¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤ –¥–ª—è –≤–∏–∫–ª–∏–∫—É
ALLOWED = set()


class PaymentSystem:
    def __init__(self) -> None:
        # –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∞—Ç—Ä–∏–±—É—Ç–∞, —è–∫–∏–π –ø–æ–∫–∞–∑—É—î, —á–∏ –ø—ñ–¥'—î–¥–Ω–∞–Ω—ñ –º–∏ –¥–æ –±–∞–Ω–∫–æ–º–∞—Ç—É
        self.connected_to_the_atm: bool = False

    # –ü–µ—Ä–µ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –º–∞–≥—ñ—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥—É __getattribute__, —è–∫–∏–π –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è
    # –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –¥–æ—Å—Ç—É–ø—É –¥–æ –±—É–¥—å-—è–∫–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞ –∫–ª–∞—Å—É
    def __getattribute__(self, name: str) -> Any:
        print(f"Accessing the attribute: {name}")

        # –Ø–∫—â–æ –Ω–∞–∑–≤–∞ –∞—Ç—Ä–∏–±—É—Ç–∞ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —á–æ—Ä–Ω–æ–º—É —Å–ø–∏—Å–∫—É
        # —ñ –Ω–µ —î –¥–æ–∑–≤–æ–ª–µ–Ω–æ—é, –ø—ñ–¥–Ω—ñ–º–∞—Ç–∏ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è
        if name in methods_blacklist and name not in ALLOWED:
            raise Exception(f"The attribute {name} is private")

        # –Ø–∫—â–æ –Ω–∞–∑–≤–∞ –∞—Ç—Ä–∏–±—É—Ç–∞ –¥–æ–∑–≤–æ–ª–µ–Ω–∞, –≤–∏–¥–∞–ª—è—î–º–æ —ó—ó –∑ –º–Ω–æ–∂–∏–Ω–∏ –¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö
        try:
            ALLOWED.remove(name)
        except KeyError:
            pass

        # –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –∞—Ç—Ä–∏–±—É—Ç, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –º–µ—Ç–æ–¥ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É
        return object.__getattribute__(self, name)
        # return super().__getattribute__(name)

    # –ü—É–±–ª—ñ—á–Ω–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –¥–µ–ø–æ–∑–∏—Ç—É
    def deposit(self, amount: int):
        pass

    # –ü—Ä–∏–≤–∞—Ç–Ω–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–Ω–∫–æ–º–∞—Ç—É
    def _connect_to_the_atm(self):
        self.connected_to_the_atm = True
        print("Connected to the ATM")

    # –ü—Ä–∏–≤–∞—Ç–Ω–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É –≥–æ—Ç—ñ–≤–∫–∏ –≤ –±–∞–Ω–∫–æ–º–∞—Ç—ñ
    def _count_the_cash(self, amount: int):
        print("Counting the cash in the ATM")
        print(f"Total: {amount}")

    # –ü—Ä–∏–≤–∞—Ç–Ω–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –≤–∏–¥–∞—á—ñ –≥—Ä–æ—à–µ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ
    def _get_money(self):
        print("üí∏ Returning money to the user")

    # –ü—É–±–ª—ñ—á–Ω–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –∑–Ω—è—Ç—Ç—è –≥–æ—Ç—ñ–≤–∫–∏
    def withdraw(self, amount: int):
        # –î–æ–¥–∞—î–º–æ –ø—Ä–∏–≤–∞—Ç–Ω—ñ –º–µ—Ç–æ–¥–∏ –¥–æ –º–Ω–æ–∂–∏–Ω–∏ –¥–æ–∑–≤–æ–ª–µ–Ω–∏—Ö –¥–ª—è —Ü—å–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É
        ALLOWED.add("_connect_to_the_atm")
        ALLOWED.add("_count_the_cash")
        ALLOWED.add("_get_money")

        self._connect_to_the_atm()
        self._count_the_cash(amount)
        self._get_money()


# –°—Ç–≤–æ—Ä—é—î–º–æ –µ–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—É
privat = PaymentSystem()
# privat.deposit(amount=100)   # –í–Ω–µ—Å–µ–Ω–Ω—è –≥–æ—Ç—ñ–≤–∫–∏ (—Ü–µ–π —Ä—è–¥–æ–∫ –∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π)
privat.withdraw(amount=100)  # –ó–Ω—è—Ç—Ç—è –≥–æ—Ç—ñ–≤–∫–∏
# privat._PaymentSystem__get_money()   # –°–ø—Ä–æ–±–∞ –≤–∏–∫–ª–∏–∫—É "–ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ" –º–µ—Ç–æ–¥—É
# privat._get_money()   # –°–ø—Ä–æ–±–∞ –≤–∏–∫–ª–∏–∫—É "–ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ" –º–µ—Ç–æ–¥—É
# –ø—ñ—Å–ª—è –π–æ–≥–æ –≤–∏–∫–ª–∏–∫—É –≤ –º–µ—Ç–æ–¥—ñ withdraw
